echo "performing initial build to create docker image metacurrency/holochain/tests"
./build.tests > /dev/null
echo "  docker run metacurrency/holochain/tests into container to force read of host filesystem"
docker run  -e LOCAL_USER_ID=`id -u $USER` -i metacurrency/holochain/tests > /dev/null
echo "  completed initial build"


SECONDS=0

echo "simulating change of source code, and rebuilding docker image"
touch simulatingSourceCodeEdit
echo "biggerBolderChange" > ../../obviousSourceCodeEdit
./build.tests
echo "  rebuild required: $SECONDS seconds"
echo

rm simulatingSourceCodeEdit ../../obviousSourceCodeEdit
echo "(this test always passes)"
echo "passed"
echo
